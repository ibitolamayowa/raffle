{% extends 'core/base.html' %}
{% load static %}
{% block body %}
<div class="text-white text-center w-100 ">
    <div style="height: 500px;" class="container d-flex p-3 mx-auto flex-column">
      <header>
        <div>
          <h3 class="float-start mb-0">Ralph</h3>
          <nav class="nav nav-masthead justify-content-center float-end">
            <a class="text-white nav-link custom-nav-link" href="#">Home</a>
            <a class="text-white nav-link custom-nav-link" href="#">About</a>
            {% if request.user.is_authenticated %}
            <a class="text-white nav-link custom-nav-link" href="{% url 'dashboard' %}">Dashboard</a>
            {% else %}
            <a class="text-white nav-link custom-nav-link" href="{% url 'login' %}">Login</a>
            {% endif %}
          </nav>
        </div>
      </header>
    
      <main class="my-auto px-3">
        <h1 class="slide-up">Ralph </h1>
        <p class="lead"><span class="slide-up">This is ralph,</span> <span class="fancy-line slide-up">register</span> <span class="slide-up">to get started,</span> <span class="fancy-line slide-up">buy tickets</span> <span class="slide-up">and bid for amazing prices.</span></p>
        <p class="lead">
          <a style="opacity: 0;" href="#" class="btn btn-primary fade-in">Learn more</a>
        </p>
      </main>

    </div>
    <div class="py-5" style="background-color: rgba(255,255,255,0.03);">
      <div class="container">
        <h3 class="text-center mb-5">{{countdown_message}}</h3>
        <div style="opacity: 0;" id="countdown-container" class="mx-auto countdown-container d-flex justify-content-between">
          <div id="days" class="time-box">
            <div class="label">Days</div>
          </div>
          <div id="hours" class="time-box">
            <div class="label">Hours</div>
          </div>
          <div id="minutes" class="time-box">
            <div class="label">Minutes</div>
          </div>
          <div id="seconds" class="time-box">
            <div class="label">Seconds</div>
          </div>
          
        </div>
      </div>
    </div>
    <div class="py-5 bg-white text-dark">
      <div class="container">
        <h3 class="mb-5">{{raffle_prize_title}}</h3>
        <div class="row">
          <div class="col-12 col-md-6"><img style="object-fit: contain; height: 500px" class="w-100" src="{{active_raffle.campaign.prize.img_url}}" alt="{{active_raffle.campaign.prize.name}}"></div>
          <div class="col-12 col-md-6 d-flex flex-column align-items-center justify-content-center">
            <div class="fw-500 fs-1">{{active_raffle.campaign.prize.name}}</div>
            <div class="fs-2">{{active_raffle.campaign.prize.description}}</div>
          </div>
        </div>
      </div>
      
    </div>
    <div class="py-5" style="background-color: rgba(255,255,255,0.03);">
      <div class="container">
        <h3 class="mb-3">About</h3>
        <p class="fs-5">
          You need to register to get started with Ralph.
          <br>
          Once registered, if a campaign is active you can purchase tickets from your dashboard and bid for amazing prizes.
          <br>
          The winning ticket number will be randomly generated by the program, and the winner will be given the prize.
        </p>
      </div>
    </div>
    <footer class="mt-auto text-white-50 pt-5">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 px-4">
            <div class="fw-400 fs-5 mb-2">Quicklinks</div>
            <a class="text-white text-decoration-none" href="mailto:ralphraffledraw@gmail.com">Contact Us</a>
          </div>
        </div>
        <hr>
        <p>&copy; Copyright Ralph 2021. Developed by <a target="__blank" href="https://jbritz.tech/" class="text-white">jbritz</a>.</p>
      </div>
    </footer>
</div>
{% endblock body%}
{% block scripts %} 
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
<script>
  var tl = gsap.timeline();
  tl.to(".slide-up",{"--slideHeight": "0%", translateY: "0%", stagger: 0.2}).to(".fade-in",{opacity: 1})
</script>
<script>
  const countDownContainer = document.getElementById("countdown-container");
  // Countdown Script
  const doubleNumber = num => String(num).length == 1 ? `0${num}` : `${num}`;
  (function() {
    // Set the date we're counting down to
    var countDownDate = new Date("{{countdown_time|date:'M j, Y H:i:s'}}").getTime();
    
    // Update the count down every 1 second
    var x = setInterval(function() {
      countDownContainer.style.opacity = "1";
      
      // Get todays date and time
      var now = new Date().getTime();
      
      // Find the distance between now an the count down date
      var distance = countDownDate - now;

      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);

      if (distance < 0) {days=hours=minutes=seconds=0}

      // Display the result in an element with id="demo"
      document.getElementById("days").innerHTML = `<div class="label">Days</div>${days}`
      document.getElementById("hours").innerHTML = `<div class="label">Hours</div>${doubleNumber(hours)}`
      document.getElementById("minutes").innerHTML = `<div class="label">Minutes</div>${doubleNumber(minutes)}`
      document.getElementById("seconds").innerHTML = `<div class="label">Seconds</div>${doubleNumber(seconds)}`

      // If the count down is finished, write some text
      console.log(distance);
      if (distance < 0) {
        clearInterval(x);
        // Display Expired
        countDownContainer.parentElement.innerHTML += "<div class='fs-4 pt-4'>The countdown has ended! <br>{{additional_countdown_message}}</div>";
      }
    }, 1000);
  })();
</script>
{% endblock scripts %}
